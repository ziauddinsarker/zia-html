!function(a,b,c,d,e){!function(){function b(b){var c=decodeURIComponent(encodeURIComponent(a.location.pathname)),d=decodeURIComponent(encodeURIComponent(a.location.search)),e=decodeURIComponent(encodeURIComponent(a.location.hash));return c=c.replace(/^\/\w\w\//,"http://www.shutterstock.com/").replace(/^language\.\w\w\//,""),d&&(d=d.substring(1).replace(/&&/g,"&").split("&").filter(function(a,b,c){return a&&!/^language=/.test(a)}).join("&"),d&&(d="?"+d)),"/"+b+c+d+e}function c(){var c=d(this);return c.closest(".selected").length?c.blur():a.location=b(c.data("language")),!1}function e(){var a=d(this);return a.prop("href",b(a.data("language"))),!0}function f(){var a=d(".language-dropdown .dropdown-menu");a.on("click","a",c),a.on("contextmenu","a",e)}var g=d(".language-dropdown ul").data("use-href")?!1:!0;g&&f()}(),function(){function a(){h&&(clearTimeout(h),h=null)}function e(){var b=d(this),c=b.data("popover");c.options.animation=!1,b.data("popover",c).off("click",a).off("hidden",e)}function f(b){h=setTimeout(function(a){var b=a.data("popover");h=null,b.options.animation=!0,a.data("popover",b).popover("show")},1500,b),b.on("click",a).on("hidden",e)}function g(a){var e,g;a.length&&(e=d("#swig-login-template").remove().html().trim(),g=d("#swig-login-content").remove().html().trim(),a.popover({animation:!1,clickAway:!0,margin:18,template:function(){return e},content:function(){return g}}).on("click",function(b){a.show(),b.preventDefault()}).on("shown",function(){var e=!("activeElement"in b&&b.activeElement!==b.body);a.data("focus")&&e&&d("html:not([class*=ie])").find("#user").focus(),c.utils&&c.utils.addPlaceholder&&c.utils.addPlaceholder()}),a.hasClass("animate-in")&&f(a))}var h;g(d("#inline-login > a"))}(),function(){d("#logo-search").on("shown",function(){d("#search-input").focus(),d(this).css("overflow","visible")}).on("hide",function(){d(this).find("[data-toggle='dropdown']").parent().removeClass("open"),d("#form-search").hide(),d(this).css("overflow","hidden"),d(a).trigger("resize")}).on("hidden",function(){d("#form-search").show()}),d("#mobile-nav").on("shown",function(){d("body").css("overflow","hidden")}).on("hide",function(){d(this).scrollTop(0),d("body").css("overflow","auto")})}()}(window,document,Ss,jQuery,Math),function(a,b,c,d){var e,f,g=c(".form-search"),h=a.createSwigUtils?a.createSwigUtils(swig):{processTemplateAsString:function(){}};g.on("click",".dropdown-menu [type=radio]",function(a){PubSub.publishSync("searchFilter.change",this.value),a.stopPropagation()}),c(".lt-ie9 .form-search").on("click",".dropdown-menu label",function(a){PubSub.publishSync("searchFilter.change",c(this).find("input").val()),a.stopPropagation()}),PubSub.subscribe("searchFilter.change",function(a,b){var c=g.find(".dropdown input[value="+b+"]");c.data();c[0].checked=!0,g.find(".dropdown-trigger").text(c.parent("label").text()).end().attr("action",c.data("action")).find(".search-input").attr("placeholder",c.data("placeholder"))}),g.on("submit",function(a){var b;e&&(a.preventDefault(),b=c(e()),0===b.closest(this).length&&g.append(b.hide()),this.submit())}),b.getElementById("refine-search")&&(e=function(){var a,c;return function(d){return!a&&d&&(a=!0,c=null),c||(c=b.getElementById("refine-search"))}}(),c("#refine-search-trigger").popover({animation:!1,html:!0,trigger:"click",clickAway:!0,centerArrowOnTrigger:!0,margin:7,template:function(){return h.processTemplateAsString("swig-refine-search-template",null,!0)},content:function(){return h.processTemplateAsString("swig-refine-search-content",null,!0)},placement:"bottomRight"}).on("shown",function(){e(!0),c.fn.colorpicker&&(c(".color-picker input[name=color]").colorpicker({container:".color-picker"}).on("showPicker",function(a){c(".color-picker .colorpicker").show()}).on("hidePicker",function(a){c(".color-picker .colorpicker").hide()}).on("changeColor",function(a){c(".refine-search .swatch").css("background-color",a.color.toHex()).show()}),c(".lt-ie9 .color-picker input[name=color]").on("focusin",function(){c(this).colorpicker("show")})),f()}),g.on("click",'#refine-search input[name="refine-reset"]',function(a){c.fn.colorpicker&&c(".color-picker input[name=color]").colorpicker("setValue",null),g[0].reset(),c(".swatch").css("background-color","#fff").hide()}),g.on("click","#refine-search .more-people-toggle, #refine-search .less-people-toggle",function(a){a.preventDefault(),c("#refine-search .more-people, #refine-search .more-people-toggle, #refine-search .less-people-toggle").toggle()}),PubSub.subscribe("searchFilter.change",function(a,b){var d=c.find(".media-type input",e());return"music"===b||"videos"===b?!1:void d.forEach(function(a){a.value!==b?(a.removeAttribute("checked"),a.checked=!1):(a.setAttribute("checked","checked"),a.checked=!0)})}),g.on("change","#refine-search .media-type input",function(a){PubSub.publishSync("searchFilter.change",this.getAttribute("value"))}),g.on("change","#refine-search .more-people select",function(a){PubSub.publishSync("morePeopleSelectChanged")}),PubSub.subscribe("morePeopleSelectChanged",function(){c('#refine-search input[name="no_people"], #refine-search input[name="editorial"]').removeAttr("checked"),c('#refine-search input[name="model_released"]')[0].setAttribute("checked","checked")}),g.on("change","#refine-search input[name=model_released]",function(a){c(this).is(":checked")?PubSub.publishSync("peopleOnlyChecked"):PubSub.publishSync("peopleOnlyUnchecked")}),PubSub.subscribe("peopleOnlyChecked",function(){c('#refine-search input[name="no_people"], #refine-search input[name="editorial"]').removeAttr("checked")}),PubSub.subscribe("peopleOnlyUnchecked",function(){c("#refine-search .more-people select").prop("selectedIndex",0)}),g.on("change","#refine-search input[name=editorial]",function(a){c(this).is(":checked")&&PubSub.publishSync("editorialChecked")}),PubSub.subscribe("editorialChecked",function(){c('#refine-search input[name="model_released"]')[0].removeAttribute("checked"),c("#refine-search .more-people select").prop("selectedIndex",0)}),g.on("change","#refine-search input[name=no_people]",function(a){c(this).is(":checked")&&PubSub.publishSync("noPeopleChecked")}),PubSub.subscribe("noPeopleChecked",function(){c('#refine-search input[name="model_released"]').removeAttr("checked"),c("#refine-search .more-people select").prop("selectedIndex",0)})),f=function(){function a(a){var c=[],d=new RegExp("^"+b.value,"i"),e=0,f=a.length;if(a)for(;f>e;e++){var g=a[e].display_name;null!==d.exec(g)&&c.push(g)}return c}var b=c(".refine-search input[name=photographer_name]")[0],d=function(a){var b=function(){function a(a){return"<span>"+a+"</span>"}var b,c;return function(d,e){return d!==b&&(b=d,c=new RegExp("^"+b,"i")),e=e.replace(c,a)}}();return function(c){return b(a.value,c.value)}}(b);c(b).typeahead({name:"photographer_name",limit:10,template:d,remote:{url:"/webstack/search/contributor_autocomplete?prefix=%QUERY",dataType:"json",cache:!1,filter:a}})}}(window,document,jQuery,Ss),function(a,b,c,d){function e(){f(x),g(),e.done=!0}function f(a){o=a[0],q=c(".feedback-trigger"),r=q[0],s=c.find("textarea",o)[0],t=c.find(".btn-primary",o)[0],u=c.find(".feedback-thanks",o)[0],v=c.find("form",o)[0],w=c.find("input[type='radio']",o),p="feedback/click"}function g(){PubSub.subscribe(p,function(a,b){s.setAttribute("placeholder",b.placeholder),s.focus(),b.target.focus(),delete b.target,b=null})}function h(a){e.done||e(),r.className+=" off",v.reset(),w.forEach(function(a,b,c){a.removeAttribute("disabled")}),t.removeAttribute("disabled"),s.removeAttribute("disabled"),s.setAttribute("placeholder",""),u.className=u.className.replace(/ on\b/,"")}function i(a){s.focus()}function j(a){r.className=r.className.replace(/ off\b/,""),r.style.outline="none"}function k(a){q.blur(),r.removeAttribute("style")}function l(a){var b=this.getAttribute("data-placeholder");b&&PubSub.publish(p,{target:this,placeholder:b})}function m(a){var b={},d=c.find("input[type=hidden]",v);return d.forEach(function(a,c,d){b[a.name]=a.value}),w.some(function(a,c,d){return a.checked&&(b[a.name]=a.value),a.checked}),b[s.name]=s.value,b}function n(a){var b=m();w.forEach(function(a,b,c){a.setAttribute("disabled","disabled")}),t.setAttribute("disabled","disabled"),s.setAttribute("disabled","disabled"),a.preventDefault(),c.ajax({url:v.action,dataType:"text",type:"POST",data:b}),u.className+=" on",setTimeout(function(){x.modal("hide")},2e3)}var o,p,q,r,s,t,u,v,w,x=c(".feedback-modal");x.length&&x.on("show",h).on("shown",i).on("hide",j).on("hidden",k).on("click","input[type='radio']",l).on("submit","form",n)}(window,document,jQuery,Ss),function(a,b,c,d,e){"use strict";function f(){}function g(){}function h(){}f.prototype.init=function(a){this.errors=a.errors},f.prototype.showFormErrors=function(a,b){var e=c(".help-block",a.parentNode);b=d.utils.processHTMLEntities(b),e.length>0?e.text(b).addClass("error-message").show():c(a).closest(".control-group").append(c("<div class='help-block error-message'>"+b+"</div>").show()),c(a).closest(".control-group").addClass("error")},f.prototype.clearErrorFields=function(a){var b=c(".control-group .error-message",a);b.closest(".control-group").removeClass("error"),b.remove()},f.defaults={},f.create=function(a){var b=new f;return a=c.extend({},f.defaults,a),b.init(a),b},d.createErrorUtilities=f.create,g.defaults={name:".collectionBox",itemTemplateId:"swig-collection-box-item",topics:{createdItem:"createdItem",requestList:"requestList",responseList:"responseList",addedToList:"addedToList",createdList:"createdList",addedMedia:"addedMedia",ajaxError:"ajaxError",networkError:"networkError"}},g.prototype.init=function(b){this.name=b.name,this.topics=b.topics,this.$trigger=c(b.triggerSelector),this.itemTemplateId=b.itemTemplateId,this.popoverSelector=b.popoverSelector,this.listContainerSelector=b.listContainerSelector,this.swigUtils=a.createSwigUtils(e)},g.prototype.dynamicInit=function(){this.isConstructed=!0,this.$collectionBox=c(this.popoverSelector),this.collectionBox=this.$collectionBox[0]},g.prototype.close=function(a){this.$trigger.popover("hide"),a.preventDefault()},g.prototype.onClickCloseButton=function(a){this.close(a)},g.prototype.onClickItem=function(a){this.close(a),this.createList(instance.getItemData(a.target,!0))},g.prototype.getListData=function(a){var b,d=c.find("[data-id]",a);return b=d.map(function(a){return this.getItemData(a)},this),d=null,b},g.prototype.getListDataViaProxy=function(){var a,c=b.createElement("div");return c.innerHTML=this.listContainer.innerHTML,a=this.getListData(c),c=null,a},g.prototype.createListAsString=function(a){var b="";return a.forEach(function(a){b+=this.createItem(a,this.itemTemplateId)},this),b},g.prototype.createList=function(a){var b=(Array.isArray(a)?a:[a]).concat(this.getListDataViaProxy());this.listContainer.innerHTML=this.createListAsString(b),PubSub.publish(this.topics.createdList+this.name,b)},g.prototype.publishList=function(a){var b;-1===a.indexOf(this.name)&&(b=this.getListData(this.listContainer),PubSub.publish(this.topics.responseList+this.name,b))},g.prototype.getItemData=function(a,b){return{id:a.getAttribute("data-id"),name:a.textContent||a.innerText,timestamp:b?Date.now():parseInt(a.getAttribute("data-timestamp"),10)}},g.prototype.createItem=function(a,b){return b?this.swigUtils.processTemplateAsString(b,{id:a.id,name:a.name,timestamp:a.timestamp},!0):void 0},g.create=function(a){var b=new g;return a=c.extend({},g.defaults,a),b.init(a),b},d.createCollectionBox=g.create,h.defaults={name:".addToLightbox",popoverSelector:".add-to-lightbox .popover",listContainerSelector:"ul",triggerSelector:".add-to-lightbox-trigger",confirmationContainerSelector:".add-lightbox-confirmation",confirmationClass:"popover-add-lightbox-confirmed",confirmationTemplateId:"swig-collection-box-confirmation",errorContainerSelector:".add-lightbox-error",errorClass:"popover-add-lightbox-error",errorTemplateId:"swig-collection-box-error",loadingClass:"popover-add-lightbox-loading",routes:{add_to_collection:"/",new_collection:"/",list_collections:"/"}},h.prototype=new g,h.constructor=h,h.prototype.init=function(a){g.prototype.init.call(this,a),this.errors=a.errors,this.confirmationContainerSelector=a.confirmationContainerSelector,this.confirmationClass=a.confirmationClass,this.confirmationTemplateId=a.confirmationTemplateId,this.errorContainerSelector=a.errorContainerSelector,this.errorClass=a.errorClass,this.errorTemplateId=a.errorTemplateId,this.loadingClass=a.loadingClass,this.routes=a.routes,this.hideTID=null,this.requestTimer=null,this.initListeners()},h.prototype.dynamicInit=function(){g.prototype.dynamicInit.call(this),this.isLoggedIn=-1!==this.collectionBox.className.indexOf("logged-in"),this.isLoggedIn&&(this.dynamicInitListeners(),this.errors&&(this.errorUtilities=f.create({errors:this.errors})))},h.prototype.initListeners=function(){var b=this;this.$trigger.popover({animation:!1,container:".add-to-lightbox",html:!0,trigger:"click",clickAway:!0,template:function(){return b.swigUtils.processTemplateAsString("swig-collection-box-template",null,!0)},title:function(){return b.swigUtils.processTemplateAsString("swig-collection-box-title",null,!0)},content:function(){var a;return a=b.listContainer?c(b.listContainer.parentNode).html():b.swigUtils.processTemplateAsString("swig-collection-box-content",null,!0)},placement:function(b,d,e,f,g){var h=c(a),i=h.scrollTop()+h.height(),j={left:0};return i<g.top+f?j.top=-(g.top-(i-f)):j.top=0,j}}).on({shown:this.onShown.bind(this),hide:this.onHide.bind(this)})},h.prototype.dynamicInitListeners=function(){PubSub.subscribe(this.topics.requestList,this.publishList.bind(this)),PubSub.subscribe(this.topics.responseList,this.syncList.bind(this)),PubSub.publish(this.topics.requestList+this.name)},h.prototype.processRequest=function(a,b){var d=this,e=c.ajax(a);d.$collectionBox.addClass(d.loadingClass),d.setRequestTimer(),e.done(function(a,c,e){null===a.errors||a.errors&&!a.errors.length?(d.clearRequestTimer(),PubSub.publish(d.topics.addedMedia+d.name,a),"function"==typeof b&&b(a)):(d.clearRequestTimer(),d.showError(),PubSub.publish(d.topics.ajaxError+d.name,a))}),e.fail(function(){d.clearRequestTimer(),d.showError(),d.publishNetworkError.bind(d)})},h.prototype.onClickItem=function(a){var b=c(a.target).text();this.addToExistingCollection(b,a.target)},h.prototype.syncList=function(a,b){-1===a.indexOf(this.name)&&Array.isArray(b)&&(b.sort(function(a,b){var c=parseInt(a.timestamp,10),d=parseInt(b.timestamp,10);return-(c-d)}),this.listContainer.innerHTML=this.createList(b))},h.prototype.addToNewCollection=function(a){var b=this,c=this.$trigger.data();b.processRequest({type:"POST",url:b.routes.new_collection,data:{lightbox_name:a,photo_id:c.imageId,src:c.searchId}},function(c){b.createList({id:c.lightbox.lightbox_id,name:a,timestamp:Date.now()}),b.showConfirmation({id:c.lightbox.lightbox_id,name:a})})},h.prototype.addToExistingCollection=function(a,b){var d=this,e=this.$trigger.data(),f=c(b).data("id");d.processRequest({type:"POST",url:d.routes.add_to_collection+encodeURIComponent(f),data:{action:"add_image",photo_id:e.imageId,src:e.searchId}},function(){c(b).closest(".collection-box-item").first().remove(),d.createList(d.getItemData(b,!0)),d.showConfirmation({id:f,name:a})})},h.prototype.requestCollections=function(){var a=this,b=c.ajax({cache:!1,type:"GET",url:a.routes.list_collections});b.done(function(b,c,d){(!b.errors||b.errors&&!b.errors.length)&&Array.isArray(b)&&(a.lazyData=b.map(function(a){return{id:a.lightbox_id,name:a.lightbox_name,timestamp:Date.now()}}))}),b.fail(function(){})},h.prototype.setRequestTimer=function(){var b=this,c=5e3;b.requestTimer=a.setTimeout(function(){b.showError()},c)},h.prototype.clearRequestTimer=function(){a.clearTimeout(this.requestTimer)},h.prototype.isExistingCollection=function(a){var b=c.find("[data-id]",this.listContainer),d=!1;return b.forEach(function(b){a.toLowerCase()===(b.textContent||b.innerText).toLowerCase()&&(d=b)}),d},h.prototype.doFormValidation=function(a,b,c){var d=!0,e=this.errorUtilities;return e.clearErrorFields(a),b.length?b.length>24?(e.showFormErrors(c,e.errors["long"]),d=!1):/[<>"'&]/.test(b)&&(e.showFormErrors(c,e.errors.badChars),d=!1):(e.showFormErrors(c,e.errors.empty),d=!1),d},h.prototype.onFormSubmission=function(a){var b=c.find("input[data-required]",a.target)[0],d=b.value.trim(),e=this.doFormValidation(a.target,d,b),f=this.isExistingCollection(d);e&&(f?this.addToExistingCollection(d,f):this.addToNewCollection(d)),a.preventDefault()},h.prototype.onHide=function(){if(this.isLoggedIn&&(c(this.listContainer).off("click"),this.$collectionBox.find("form").off("submit")),this.$collectionBox.find(".close").off("click"),this.$collectionBox.removeClass(this.confirmationClass),this.$collectionBox.removeClass(this.errorClass),this.isLoggedIn){var b=c.find("input[data-required]",this.collectionBox)[0];b&&(b.value=""),this.errorUtilities.clearErrorFields(this.$collectionBox)}this.hideTID&&a.clearTimeout(this.hideTID)},h.prototype.onShown=function(){if(this.isConstructed||this.dynamicInit(),this.isLoggedIn){if(c.prototype.placeholder){var a=this.$collectionBox.find("[placeholder]");c("html.lt-ie9").length?a.val(a.attr("placeholder")):a.placeholder()}this.listContainer=c.find(this.listContainerSelector,this.collectionBox)[0],this.lazyData&&(this.createList(this.lazyData),this.lazyData=null),this.confirmationContainer=c.find(this.confirmationContainerSelector,this.collectionBox)[0],this.errorContainer=c.find(this.errorContainerSelector,this.collectionBox)[0],c(this.listContainer).on("click","button",this.onClickItem.bind(this)),this.$collectionBox.find("form").on("submit",this.onFormSubmission.bind(this))}this.$collectionBox.find(".close").on("click",this.onClickCloseButton.bind(this))},h.prototype.showConfirmation=function(a){this.$collectionBox.removeClass(this.errorClass+" "+this.loadingClass),this.$collectionBox.addClass(this.confirmationClass),this.confirmationContainer.innerHTML=this.swigUtils.processTemplateAsString(this.confirmationTemplateId,a,!0),this.hideAfter(3e3)},h.prototype.showError=function(a){this.$collectionBox.removeClass(this.confirmationClass+" "+this.loadingClass),this.$collectionBox.addClass(this.errorClass),this.errorContainer.innerHTML=this.swigUtils.processTemplateAsString(this.errorTemplateId),this.hideAfter(3e3)},h.prototype.hideAfter=function(b){var c=this;b=b||3e3,this.hideTID=a.setTimeout(function(){c.$trigger.popover("hide")},b)},h.prototype.publishNetworkError=function(a){PubSub.publish(this.topics.networkError+this.name,a)},h.create=function(a){var b=new h,d=c.extend({},g.defaults,h.defaults,a);return b.init(d),d.lazyLoad&&b.requestCollections(),b},d.createAddToCollectionBox=h.create,function(){c.find(".add-to-lightbox").length>0&&h.create(d.addToCollectionBox||{})}()}(window,document,jQuery,Ss,swig),function(a,b,c,d){function e(a,b){var c=a.getAttribute("data-key");return b!==!0?("EXCEPTION_REQUIRED"===b.code?h(a,k[c]):b.accounts_error&&("USERNAME_EXISTS"===b.accounts_error[0].code?h(a,k.usernameExists):"VALIDATION_ERROR_PASSWORD_BAD_CHARACTERS"===b.accounts_error[0].code&&"password"===a.name?h(a,k.badCharacters):h(a,b.accounts_error[0].message)),!1):!0}function f(a){var b=this,c=!0,e=d.find("input[data-required]",b);g(b),e.forEach(function(a){var b=a.getAttribute("data-key");a.value.trim()||(h(a,k[b]),c=!1)}),c||a.preventDefault()}function g(a){var b=d(".control-group .error-message",a);b.closest(".control-group").removeClass("error"),b.remove()}function h(a,b){var e=d(".help-block",a.parentNode);b=c.utils.processHTMLEntities(b),e.length>0?e.text(b).addClass("error-message").show():d(a).closest(".control-group").append(d("<div class='help-block error-message'>"+b+"</div>").show()),d(a).closest(".control-group").addClass("error")}function i(a){var b=this,c=!0,f=d.find("input[data-required]",b);g(b),f.forEach(function(a){var f,g=a.getAttribute("data-key");"pass"===g&&(f=a.value.trim(),f.length?f.length<4?(h(a,k.shortPassword),c=!1):/[<>"'&]/.test(f)&&(h(a,k.badCharacters),c=!1):(h(a,k[g]),c=!1)),d(b).validate("validateField",d(a),function(b){e(a,b)||(c=!1)})}),c||a.preventDefault()}function j(){c.errors&&c.errors.signupModal&&(k=c.errors.signupModal),b.getElementById("browse-modal")&&(d("#browse-modal").modal({show:!0}),d("#modal-tabs").on("click","a",c.utils.tabSwitcher),d.prototype.placeholder&&d("#browse-modal").on("shown",function(){d("[placeholder]",this).placeholder()})),d(".tab-pane-sign-up").validate().on("submit",i),d(".tab-pane-sign-in").on("submit",f)}var k;j()}(window,document,Ss,jQuery),function(a,b,c,d){function e(a,c,d){var e,f;d?(e=new Date,e.setTime(e.getTime()+24*d*60*60*1e3),f="; expires="+e.toGMTString()):f="",b.cookie=a+"="+c+f+"; path=/"}function f(a){for(var c=a+"=",d=b.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(c))return f.substring(c.length,f.length)}return null}function g(a){e(a,"",-1)}function h(d){var e={event_type:"page_load"};"lil-brother"===b.body.id&&a.LilBro&&(c.lilBro=new a.LilBro({element:b.body,server:c.server,event_base:c.base,watch_focus:!1}),d&&(e.optimizely_data=JSON.stringify(d).replace(/[&\/\\#+$~%*?]/g,"")),c.lilBro.write(e),c.lilBroRan=!0)}function i(a,b,c,d){if(Easel.isBrowserSupported()){var e=new Easel(a,{appUrl:b,data:{invokedFrom:c,srcId:d}});e.launch()}}!function(a){a.States={ON:".on",OFF:".off",START:".start",STOP:".stop",ERROR:".error",SUCCESS:".success",REQUEST:".request",REPLY:".reply",LOADING:".loading",CANCELLED:".cancelled",SELECTED:".selected",UNSELECTED:".unselected",EDIT:".edit",EMPTY:".empty",NOT_EMPTY:".notEmpty",LIVE:".live",DEAD:".dead",DESTROY:".destroy"},a.Events={AJAX:".ajax",CLICK:".click",KEYUP:".keyup",HIT:".hit",OVER:".over",LEAVE:".leave",CHANGE:".change",ERROR:".error",SELECTION:".selection",SUBMIT:".submit",CANCELLED:".cancelled",CONSTRUCTED:".constructed",DECONSTRUCTION:".deconstruction",HIDING:".hiding"}}(c),function(){c.utils.addPlaceholder()}(),function(){c.swigUtils=a.createSwigUtils(swig)}(),function(){d(".body-footer .languages").on("click","a",function(){var b,c="//"+a.location.host+this.getAttribute("data-href"),d=a.location.search;return d&&(b=a.location.hash,c=c.replace(/\?.*/,""),d=d.substring(1).replace(/&&/g,"&").split("&").filter(function(a,b,c){return a&&!/^language=/.test(a)}).join("&"),d&&(c=c+"?"+d),b&&(c+=b)),a.location=c,!1})}(),function(b,e){function f(){m.autocomplete_id=Date.now().toString(36)+Math.floor(1e8*Math.random()).toString(36)+Math.floor(1e8*Math.random()).toString(36),d("[name=autocomplete_id]",b.form).val(m.autocomplete_id)}function g(a){var b=[];if(a&&void 0!==a.autocompletions)for(var c=0,d=a.autocompletions,e=d.length;e>c;c++)b.push(d[c].pattern);return b}function h(a){var b=[];if(a&&a[1])for(var c=0,d=a[1],e=d.length;e>c;c++)b.push(d[c][0]);return b}function i(a,b){var c;return c=a?a!==b?!0:!1:!0}function j(a){return"string"==typeof a?a.trim():""}function k(a,b,c){var d,e,f;if(a=j(a),b=j(b),a!==b){if(e={input:a,selection:b,position:c},m.autocomplete_details.length&&(d=m.autocomplete_details[m.autocomplete_details.length-1],f=i(JSON.stringify(d),JSON.stringify(e)),!f))return;m.autocomplete_details.push(e)}}function l(){d(".tt-dropdown-menu").css({width:d(this).width()})}var m,n,o,p={queryChanged:void 0,cursorMoved:void 0};if(b&&e.languageCode){m={customer_id:c.id.customerId,autocomplete_details:[]},o=function(){var a;return function(){var b=JSON.stringify(m.autocomplete_details),c=i(a,b);return a=b,c}}(),n=function(a){var b=function(){function a(a){return"<span>"+a+"</span>"}var b,c;return function(d,e){return d!==b&&(b=d,c=new RegExp("^"+b,"i")),e=e.replace(c,a)}}();return function(c){return b(a.value,c.value)}}(b),d(b.form).off("typeahead:selected").on("typeahead:selected",function(a,b,c){"site-search"!==b.dataset||"enterKeyed"!==c&&"suggestionSelected"!==c||(k(b.inputValue,b.value,b.index),d(this).trigger("submit"))}).on("submit",function(b){var g=this;if(c.lilBro&&m.autocomplete_details.length){if(b.preventDefault(),o()&&(f(),(new LilBro.Module.Autocomplete).track(m),void 0!==a.Absinthe)){var h=m.autocomplete_details,i=[],j=[],k=[],l="old_autocomplete";a.newAutocomplete&&(l="new_autocomplete");for(var n=0;n<h.length;n++)i.push(h[n].selection),j.push(h[n].position),k.push(h[n].input);var p={client_type:"",completed_terms:i,country:Absinthe.segmentations.country,customer_id:m.customer_id,domain:a.location.hostname,dropdown_positions:j,event_sub_type:"",event_type:"autocomplete",media_type:"image",referring_url:"",request_path:a.location.href,site:"shutterstock-webstack",site_language:Absinthe.segmentations.language,test_cell_assignments:l,test_framework:"Absinthe",timestamp:(new Date).getTime(),typed_terms:k,user_agent:navigator.userAgent,version:"v1.0",visit_id:c.tracking_data.visit_id,visitor_id:c.tracking_data.visitor_id};d.post(e.sdp,p)}setTimeout(function(){g.submit()},32)}});var q=function(){var b=a.location.pathname;return"/"===b?"image-webstack-lohp":/pic-/.test(b)?"image-webstack-pic":"image-webstack-unknown"}();void 0===a.newAutocomplete&&(a.newAutocomplete=0);var r={dataType:"jsonp",cache:!0};a.newAutocomplete?(r.url="//"+e.hostNew+"?q=%QUERY&language="+e.languageCode+"&maxresults=10&client_id="+q,r.filter=g):(r.url="//"+e.host+"%QUERY?version=fuzzy&language="+e.languageCode+"&wrap=?",r.filter=h),d(b).typeahead({name:"site-search",limit:10,template:n,remote:r}).on("focus",l).on("typeahead:updated",function(a,b,c){"queryChanged"===c?(p.cursorMoved&&k(p.queryChanged,p.cursorMoved.value,p.cursorMoved.index),p.queryChanged=b.inputValue,p.cursorMoved=void 0):"cursorMoved"===c&&(p.cursorMoved=b)})}}(b.getElementById("search-input"),c.autocomplete),function(){var b={};return"optimizely"in a&&"data"in a.optimizely?(b.activeExperiments=a.optimizely.data.state.activeExperiments,b.variationNamesMap=a.optimizely.data.state.variationNamesMap,b.variationIdsMap=a.optimizely.data.state.variationIdsMap,b.optimizelyEndUserId=f("optimizelyEndUserId"),void h(b)):void h(b)}(),function(){c.liveChat&&c.liveChat.button_id&&new c.utils.ScriptLoader({src:c.liveChat.url,beforeLoad:function(){a._laq=a._laq||[],a._laq.push(function(){liveagent.showWhenOnline(c.liveChat.button_id,d(".lc-online")[0])}),a._laq.push(function(){liveagent.addButtonEventHandler(c.liveChat.button_id,function(a){d("body").trigger(a)})})},onLoad:function(){liveagent.init("https://d.la2c2.salesforceliveagent.com/chat","572a0000000Ctu4","00D30000001GgSC"),c.liveChat.username&&liveagent.addCustomDetail("userName",c.liveChat.username),d(".lc-online").on("click",function(){liveagent.startChat(c.liveChat.button_id)})}})}(),function(){new c.utils.ScriptLoader({src:c.impactRadius.url})}(),function(){function a(a){var b,c;return a.preview_ratio>1?(b=a.preview_width+"px",c="auto"):(c=a.preview_height+"px",b="auto"),{width:b,height:c}}function b(b){var c=b.data("preview-values"),e=a(c);return d.extend(c,{thumb_height:e.height,thumb_width:e.width})}function e(){var a=this;h=setTimeout(function(){g(a)},200)}function f(){clearTimeout(h),d(".preview-popover").length&&d(this).popover("hide")}var g,h;g=function(){var a={};return function(e){var f=d(e),g=e.id,h=a[g]||(a[g]=b(f));f.popover({margin:22,animation:!1,html:!0,template:c.swigUtils.processTemplateAsString("swig-preview-popover"),content:c.swigUtils.processTemplateAsString("swig-preview-popover-content",h),placement:"auto"}).popover("show")}}(),c.ImagePreview=function(a){c.isMobile||d(a).on("mouseenter",e).on("mouseleave",f)}}(),function(){d(".license-banner button").on("click",function(a){d.ajax({type:"POST",url:"/webstack/tos"}),d(".license-banner").addClass("hide-banner")})}(),function(){d(".cookie-banner button").on("click",function(a){e("eu_cookie",1,365),d(".cookie-banner").addClass("hide-banner")})}(),function(){d(".alert-header button.close").on("click",function(a){a.preventDefault(),d(".alert-header").alert("close")})}(),c.easelBootstrap=_.throttle(i,1e3,{trailing:!1}),c.readCookie=f,c.createCookie=e,c.eraseCookie=g,c.fireOptimizelyData=h}(window,document,Ss,jQuery);